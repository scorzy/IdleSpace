<h1>Search new worlds</h1>
<div class="clr-row">
  <div class="clr-col-12	clr-col-sm-12	clr-col-md-12	clr-col-lg-6 clr-col-xl-6">
    <p>
      Here you can search for new worlds.
    </p>

    <clr-alert
      *ngIf="ms.game.resourceManager.searchX1.quantity.lte(0); else progress"
      [clrAlertType]="'warning'"
      [clrAlertClosable]="false"
    >
      <clr-alert-item>
        <span class="alert-text">
          You don't have any
          <a [routerLink]="'/home/res/X1'"
            >{{ ms.game.resourceManager.searchX1.name }}
          </a>
        </span>
      </clr-alert-item>
    </clr-alert>

    <ng-template #progress>
      Progress:
      <app-polynom
        [a]="ms.game.resourceManager.searchProgress.a"
        [b]="ms.game.resourceManager.searchProgress.b"
        [c]="ms.game.resourceManager.searchProgress.c"
      ></app-polynom>
      <br />
    </ng-template>

    <form clrForm>
      <clr-input-container>
        <label
          >Level
          <span> (max:{{ ms.game.enemyManager.maxLevel }}) </span>
          :</label
        >
        <input
          clrInput
          type="number"
          [(ngModel)]="userLevel"
          name="level"
          required
          [max]="ms.game.enemyManager.maxLevel"
          min="1"
        />
        <clr-control-error
          >Must be a number (1 -
          {{ ms.game.enemyManager.maxLevel }})</clr-control-error
        ></clr-input-container
      >
      <input
        type="range"
        [name]="'sln'"
        min="1"
        [max]="ms.game.enemyManager.maxLevel"
        step="1"
        [(ngModel)]="userLevel"
      />
    </form>

    <!-- Search options -->
    <div class="btn-group" *ngIf="moreSearch">
      <div class="checkbox btn" *ngIf="metal">
        <input
          type="checkbox"
          id="btn-mmd"
          [(ngModel)]="ms.game.enemyManager.moreMetal"
        />
        <label for="btn-mmd">
          <clr-icon
            [attr.shape]="ms.game.resourceManager.miningDistrict.shape"
          ></clr-icon>
        </label>
      </div>
      <div class="checkbox btn" *ngIf="cry">
        <input
          type="checkbox"
          id="btn-mcd"
          [(ngModel)]="ms.game.enemyManager.moreCrystal"
        />
        <label for="btn-mcd">
          <clr-icon
            [attr.shape]="ms.game.resourceManager.crystalDistrict.shape"
          ></clr-icon
        ></label>
      </div>
      <div class="checkbox btn" *ngIf="hab">
        <input
          type="checkbox"
          id="btn-mhs"
          [(ngModel)]="ms.game.enemyManager.moreHabitable"
        />
        <label for="btn-mhs">
          <clr-icon
            [attr.shape]="ms.game.resourceManager.habitableSpace.shape"
          ></clr-icon
        ></label>
      </div>
    </div>

    <clr-alert
      *ngIf="!limited"
      [clrAlertType]="'warning'"
      [clrAlertClosable]="false"
    >
      <clr-alert-item>
        <span class="alert-text">
          Limit reached, you can have a maximum of 20 enemy at time.
        </span>
      </clr-alert-item>
    </clr-alert>

    <clr-alert *ngIf="valid" [clrAlertType]="'info'" [clrAlertClosable]="false">
      <clr-alert-item>
        <span class="alert-text">
          Searching will cost:
          <app-price-line
            [canBuy]="true"
            [unit]="ms.game.resourceManager.searchProgress"
            [price]="ms.game.enemyManager.getRequiredSearch(userLevel)"
          ></app-price-line>
        </span>
      </clr-alert-item>
    </clr-alert>

    <button
      class="btn btn-success"
      (click)="generate()"
      [disabled]="!isValid()"
    >
      Search
    </button>
  </div>

  <div class="clr-col-12	clr-col-sm-12	clr-col-md-12	clr-col-lg-6 clr-col-xl-6">
    <h4>Jobs:</h4>
    <div cdkDropList (cdkDropListDropped)="drop($event)" class="myBg drag-list">
      <app-job
        cdkDrag
        *ngFor="let job of ms.game.enemyManager.searchJobs; trackBy: getJobId"
        [job]="job"
      ></app-job>
    </div>
  </div>
</div>
